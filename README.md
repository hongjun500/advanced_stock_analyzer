# 股票计算器 Web应用

一个功能完整的股票投资计算和分析工具，提供Web界面进行股票成本计算、盈亏分析和技术指标分析。

## 功能特点

### 🧮 成本计算
- 精确计算股票平均成本
- 支持多次买卖的加权平均成本计算
- 自动处理手续费计算
- 实时盈亏分析

### 📊 投资组合管理
- 多股票投资组合管理
- 总体盈亏统计
- 交易历史记录
- 数据导入导出

### 📈 技术分析
- 移动平均线分析
- RSI相对强弱指数
- 趋势分析
- 风险评估

### 💡 投资建议
- 基于技术指标的买卖建议
- 风险等级评估
- 综合投资建议

## 安装和运行

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行应用
```bash
python app.py
```

### 3. 访问应用
打开浏览器访问：http://localhost:5000

## 使用说明

### 添加交易记录
1. 进入"计算器"页面
2. 填写股票代码、交易日期、价格、股数等信息
3. 选择买入或卖出操作
4. 点击"添加交易"按钮

### 查看持仓信息
1. 在"计算器"页面输入股票代码
2. 点击"查询"按钮
3. 查看持仓股数、平均成本等信息

### 计算盈亏
1. 输入当前价格
2. 点击"计算盈亏"按钮
3. 查看盈亏金额和盈亏率

### 技术分析
1. 进入"分析"页面
2. 选择要分析的股票
3. 输入当前价格
4. 可选择添加历史价格数据
5. 点击"开始分析"查看结果

## 项目结构

```
stock-calculator/
├── app.py                 # Flask应用主文件
├── stock_calculator.py    # 股票计算器核心逻辑
├── advanced_stock_analyzer.py  # 高级分析功能
├── requirements.txt       # Python依赖
├── README.md             # 项目说明
├── templates/            # HTML模板
│   ├── base.html
│   ├── index.html
│   ├── calculator.html
│   ├── portfolio.html
│   └── analysis.html
└── static/              # 静态文件
    ├── css/
    │   └── style.css
    └── js/
        └── main.js
```

## API接口

### 交易相关
- `POST /api/add_trade` - 添加交易记录
- `GET /api/get_position/<stock_code>` - 获取持仓信息
- `POST /api/calculate_profit_loss` - 计算盈亏

### 投资组合
- `GET /api/get_all_stocks` - 获取所有股票列表
- `POST /api/get_portfolio_summary` - 获取投资组合摘要
- `POST /api/save_portfolio` - 保存投资组合
- `POST /api/load_portfolio` - 加载投资组合

### 分析功能
- `POST /api/analyze_stock` - 分析股票

## 技术栈

- **后端**: Python Flask
- **前端**: HTML5, CSS3, JavaScript, Bootstrap 5
- **图表**: Chart.js
- **图标**: Font Awesome

## 示例使用

### 示例1：基本成本计算
```
买入记录：
- 股票代码：000001
- 日期：2024-01-01
- 价格：20.00元
- 股数：500股
- 手续费：5元

卖出记录：
- 股票代码：000001
- 日期：2024-01-15
- 价格：19.88元
- 股数：500股
- 手续费：5元

重新买入：
- 股票代码：000001
- 日期：2024-01-20
- 价格：20.14元
- 股数：500股
- 手续费：5元

结果：当前持仓500股，平均成本20.14元
```

### 示例2：技术分析
```
输入历史价格数据：
2024-01-01,20.00,1000
2024-01-02,20.10,1200
2024-01-03,19.95,800
...

分析结果：
- 趋势分析：多头趋势
- RSI信号：强势区间
- 风险等级：中
- 投资建议：当前盈利，可继续持有
```

## 注意事项

1. 本工具仅供学习和研究使用，不构成投资建议
2. 股票投资有风险，请谨慎决策
3. 数据仅供参考，实际交易请以证券公司数据为准
4. 建议定期备份投资组合数据

## 开发计划

- [ ] 添加更多技术指标（MACD、布林带等）
- [ ] 支持实时股票数据获取
- [ ] 添加图表可视化功能
- [ ] 支持多用户登录
- [ ] 添加移动端适配

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 许可证

MIT License
